var Svg={NS:"http://www.w3.org/2000/svg",get:function(e){return document.querySelector(e)}};Svg.Element=function(e,t){var n=this;return e&&(t=t||{},this.parent=e,t["class"]=t.className,delete t.className,Object.keys(t).forEach(function(e){n[e]=t[e]}),this.params=t,this.render()),this},Svg.Element.prototype={get className(){return this._el.getAttribute("class")||""},set className(e){return this._el.setAttribute("class",e)},get el(){return this._el},remove:function(){this.el.parentNode.removeChild(this.el)},show:function(){return this._el.style.display="block",this},hide:function(){return this._el.style.display="none",this},addClass:function(e){return this.className=this.className+" "+e,this},hasClass:function(e){return this.className.indexOf(e)>-1},removeClass:function(e){this.className=this.className.replace(e)},showWithOpacity:function(){this._el.style.opacity=1},hideWithOpacity:function(){this._el.style.opacity=0},render:function(){var e=this,t=document.createElementNS(Svg.NS,this.name);return Object.keys(this.params).map(function(n){switch(n){case"id":case"textContent":t[n]=e[n];break;case"children":e.children.forEach(function(e){var n=e.name.charAt(0).toUpperCase()+e.name.slice(1);new Svg[n](t,e)});break;default:void 0!==e[n]&&t.setAttribute(n,e[n])}}),this.parent.appendChild(t),this._el=t,this}},Svg.Animate=function(e,t){return Svg.Element.call(this,e,t)},Svg.Animate.prototype=Object.create(Svg.Element.prototype),Svg.Animate.prototype.name="animate",Svg.Circle=function(e,t){return t.r=t.radius,t.cx=t.x,t.cy=t.y,delete t.radius,delete t.x,delete t.y,Svg.Element.call(this,e,t)},Svg.Circle.prototype=Object.create(Svg.Element.prototype),Svg.Circle.prototype.name="circle",Svg.Group=function(e,t){return Svg.Element.call(this,e,t)},Svg.Group.prototype=Object.create(Svg.Element.prototype),Svg.Group.prototype.name="g",Svg.Line=function(e,t){return Svg.Element.call(this,e,t)},Svg.Line.prototype=Object.create(Svg.Element.prototype),Svg.Line.prototype.name="line",Svg.PolyLine=function(e,t){var n=t.points.map(function(e){return e.join(",")});return t.points=n.join(" "),Svg.Element.call(this,e,t)},Svg.PolyLine.prototype=Object.create(Svg.Element.prototype),Svg.PolyLine.prototype.name="polyline",Svg.Rectangle=function(e,t){return Svg.Element.call(this,e,t)},Svg.Rectangle.prototype=Object.create(Svg.Element.prototype),Svg.Rectangle.prototype.name="rect",Svg.Set=function(e,t){return Svg.Element.call(this,e,t)},Svg.Set.prototype=Object.create(Svg.Element.prototype),Svg.Set.prototype.name="set",Svg.Text=function(e,t){return Svg.Element.call(this,e,t)},Svg.Text.prototype=Object.create(Svg.Element.prototype),Svg.Text.prototype.name="text",Svg.Tspan=function(e,t){return Svg.Element.call(this,e,t)},Svg.Tspan.prototype=Object.create(Svg.Element.prototype),Svg.Tspan.prototype.name="tspan";var Mvc={};Mvc.Application=function(){},Mvc.Application.prototype=Object.create({},{model:{get:function(){return this._model},set:function(e){var t=this;this._model=e,Object.observe(this._model,function(e){t.modelUpdate(t._model,e)})}},route:{get:function(){var e=(location.hash.slice(1)||"/").split("/");return e.shift(),e.pop(),e||[]},set:function(e){window.location.hash=e}}}),Mvc.Application.prototype.run=function(){window.addEventListener("load",function e(){window.removeEventListener("load",e,!1),this.onBoot.call(this)}.bind(this)),window.addEventListener("hashchange",function(){this.onRouteChange(this.route)}.bind(this)),document.addEventListener("fullscreenchange",function(){document.documentElement.classList[document.fullscreenEnabled?"add":"remove"]("fullscreen")})},Mvc.Application.prototype.showFullScreen=function(){document.documentElement.requestFullscreen()},Mvc.Application.prototype.hideFullScreen=function(){document.exitFullscreen()},Mvc.View=function(){return this},Mvc.View.prototype={},Object.defineProperty(Mvc.View.prototype,"model",{get:function(){return this._model},set:function(e){var t=this;this._model=e,Object.observe(this._model,function(e){t.modelUpdate(t._model,e)}),this.modelUpdate(t._model)}}),Mvc.View.prototype.on=function(e,t){this._el.addEventListener(e,t)};var Scalear={version:"0.4.11",defaults:{highlighted:void 0,fretCount:12,rootNote:0,scale:0,namesVisible:!0,instrument:0,neckType:"gibson"},notes:["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],intervals:["1","2♭","2♯","3♭","3♯","4","4♯","5","6♭","6♯","7♭","7♯","8"]};Scalear.Application=function(){return Object.freeze(Scalear.notes),Object.freeze(Scalear.intervals),Object.freeze(Scalear.instruments),Object.freeze(Scalear.scales),this.run(),Mvc.Application.call(this)},Scalear.Application.prototype=Object.create(Mvc.Application.prototype),Scalear.Application.prototype.name="Scalear "+Scalear.version,Scalear.Application.prototype.onBoot=function(){var e=JSON.parse(localStorage.defaults||"{}");Object.keys(Scalear.defaults).forEach(function(t){void 0===e[t]&&(e[t]=Scalear.defaults[t])}),this.model=e,this.onRouteChange(this.route),this.createUi(),this.setDefaults(),this.setModels(),this.registerHandlers()},Scalear.Application.prototype.createUi=function(){this.neckView=new Scalear.Neck(Svg.get("svg")),this.scaleBox=new Scalear.Box(Svg.get("svg")),this.scaleSelect=new Scalear.SelectTwoLevel("#scale-selector",this.model.scale,"name"),this.rootSelect=new Scalear.Select("#root-selector",this.model.rootNote),this.instrumentSelect=new Scalear.SelectTwoLevel("#instrument-selector",this.model.instrument,"name"),this.neckSelect=new Scalear.Switch("#necktype .two-values-switch",this.model.neckType)},Scalear.Application.prototype.setDefaults=function(){q("#name").innerHTML=Scalear.scales[this.model.scale].name,q("#root").innerHTML=Scalear.notes[this.model.rootNote],q("#frets-count").value=this.model.fretCount,q("footer").className="",q("header").className="",q("svg").setAttribute("class",""),document.body.classList["fender"===this.model.neckType?"add":"remove"]("dark"),document.title=Scalear.notes[this.model.rootNote]+" "+Scalear.scales[this.model.scale].name+" ("+this.name+")",this.model.namesVisible&&q("#note-names").setAttribute("checked","checked")},Scalear.Application.prototype.setModels=function(){this.neckSelect.model=this.model,this.neckView.model=this.model,this.scaleBox.model=this.model,this.rootSelect.model=Scalear.notes,this.scaleSelect.model=Scalear.scalesGrouped,this.instrumentSelect.model=Scalear.instrumentsGrouped},Scalear.Application.prototype.registerHandlers=function(){var e=this;this.neckSelect.on("change",function(){e.model.neckType=this.value}),this.scaleSelect.on("change",function(){e.model.scale=parseInt(this.value,10)}),this.rootSelect.on("change",function(){e.model.rootNote=parseInt(this.value,10)}),this.instrumentSelect.on("change",function(){e.model.instrument=parseInt(this.value,10)}),q("#note-names").addEventListener("change",function(){e.model.namesVisible=this.checked}),q("#note-names").addEventListener("keydown",function(t){13===t.keyCode&&(e.model.namesVisible=!e.model.namesVisible,this.checked=e.model.namesVisible)}),q("#frets-count").addEventListener("change",function(){var t=parseInt(this.value,10)||12;t=Math.min(t,25),t=Math.max(t,10),t!==this.value&&(this.value=t),e.model.fretCount=t}),q("#info").addEventListener("click",function(){this.hideFullScreen()}.bind(this)),q("#fullscreen").addEventListener("click",function(){this.showFullScreen()}.bind(this)),q("#fullscreen").addEventListener("keydown",function(e){13===e.keyCode&&this.showFullScreen()}.bind(this)),q("#print").addEventListener("click",function(){window.print()}.bind(this)),q("#print").addEventListener("keydown",function(e){13===e.keyCode&&window.print()}.bind(this)),applicationCache.addEventListener("updateready",function(){q("#version-info").style.display="block"},!1)},Scalear.Application.prototype.modelUpdate=function(e,t){t.forEach(function(e){switch(e.name){case"rootNote":q("#root").innerHTML=Scalear.notes[e.object.rootNote],document.title=Scalear.notes[this.model.rootNote]+" "+Scalear.scales[this.model.scale].name+" ("+this.name+")";break;case"scale":q("#name").innerHTML=Scalear.scales[e.object.scale].name,document.title=Scalear.notes[this.model.rootNote]+" "+Scalear.scales[this.model.scale].name+" ("+this.name+")";break;case"neckType":document.body.classList["fender"===this.model.neckType?"add":"remove"]("dark")}}.bind(this)),this.route=this._prepareHashString(["",Scalear.instruments[e.instrument].name,Scalear.scales[e.scale].name,Scalear.notes[e.rootNote],""].join("/")),localStorage.defaults=JSON.stringify(this.model)},Scalear.Application.prototype._prepareHashString=function(e){return e.toLowerCase().replace(/ /g,"-").replace(/[ \(\)]/g,"").replace(/♯/g,"#")},Scalear.Application.prototype.onRouteChange=function(e){var t,n;if(e.length>0){if(e[2]){for(n=0;n<Scalear.notes.length&&(t=Scalear.notes[n],this._prepareHashString(t)!==e[2]);n++);this.model.rootNote=n}e[0]&&(this.model.instrument=Scalear.instruments.filter(function(t){return this._prepareHashString(t.name)===e[0]}.bind(this))[0].id),e[1]&&(this.model.scale=scale=Scalear.scales.filter(function(t){return this._prepareHashString(t.name)===e[1]}.bind(this))[0].id)}},Scalear.Box=function(e){return this._parentEl=e,Mvc.View.call(this)},Scalear.Box.prototype=Object.create(Mvc.View.prototype),Scalear.Box.prototype.modelUpdate=function(e,t){var n=t?t[0].name:"scale";switch(n){case"highlighted":case"rootNote":case"scale":this.showScale(e.scale,e.rootNote)}},Scalear.Box.prototype.showScale=function(e,t){this._mainGroup&&this._mainGroup.remove();var n=this,i=Scalear.scales[e].notes.slice().map(function(e){return(e+t)%Scalear.notes.length});this._mainGroup=new Svg.Group(this._parentEl,{id:"scale-box",transform:"translate("+(250-(-50+28*i.length)/2)+",120)"}),i.forEach(function(t,r){r<i.length-1&&(new Svg.Text(n._mainGroup.el,{x:26+30*r,y:50,className:"interval",textContent:Scalear.intervals[Scalear.scales[e].notes[r+1]-Scalear.scales[e].notes[r]]}),new Svg.Line(n._mainGroup.el,{x1:25+30*r,x2:35+30*r,y1:59,y2:59}),new Svg.PolyLine(n._mainGroup.el,{points:[[16+30*r,52],[16+30*r,47],[23+30*r,47]]}),new Svg.PolyLine(n._mainGroup.el,{points:[[37+30*r,47],[44+30*r,47],[44+30*r,52]]}));var s=Scalear.notes[t],o=s.length>1,a=new Svg.Text(n._mainGroup.el,{x:10+30*r,y:65,note:t,className:0===r?"root":void 0,textContent:s.replace("♯",""),children:[{name:"tspan",dy:-7,textContent:o?"♯":""}]});void 0!==this.model.highlighted&&this.model.highlighted===t&&a.addClass("highlighted"),a.el.addEventListener("click",function(){if(a.hasClass("highlighted"))a.removeClass("highlighted"),this.model.highlighted=void 0;else{for(var e=document.querySelectorAll("#scale-box text.highlighted"),t=0;t<e.length;t++){var n=e[t];n.setAttribute("class",n.getAttribute("class").replace("highlighted","")||"")}a.addClass("highlighted"),this.model.highlighted=parseInt(a.el.getAttribute("note"),10)}}.bind(this),!1),new Svg.Text(n._mainGroup.el,{x:13+30*r,y:75,className:"interval",textContent:Scalear.intervals[Scalear.scales[e].notes[r]]})}.bind(this))},Scalear.instruments=[{id:0,name:"Standard (Guitar)",group:"guitar",tunning:[4,11,7,2,9,4]},{id:1,name:"7-string (Guitar)",group:"guitar",tunning:[4,11,7,2,9,4,11]},{id:2,name:"Open D (Guitar)",group:"guitar",tunning:[2,9,2,6,9,2]},{id:3,name:"Open C (Guitar)",group:"guitar",tunning:[0,4,7,0,4,7]},{id:4,name:"Open G (Guitar)",group:"guitar",tunning:[2,7,2,7,11,2]},{id:5,group:"bass",name:"Standard (Bass)",tunning:[7,2,9,4]},{id:6,group:"bass",name:"Fretless (Bass)",tunning:[7,2,9,4]},{id:7,group:"bass",name:"5-string (Bass)",tunning:[7,2,9,4,11]},{id:8,group:"bass",name:"6-string (Bass)",tunning:[0,7,2,9,4,11]},{id:9,group:"ukulele",name:"Ukulele GCEA",tunning:[9,4,0,7]},{id:10,group:"ukulele",name:"Ukulele DGBE",tunning:[4,11,7,2]},{id:11,group:"ukulele",name:"Ukulele ADG♭B",tunning:[11,6,2,9]},{id:12,group:"other",name:"Violin",tunning:[4,9,2,7]}],Scalear.instrumentsGrouped=[{name:"Guitar",group:"guitar",options:function(){return Scalear.instruments.filter(function(e){return"guitar"===e.group?e:void 0})}()},{name:"Bass",group:"bass",options:function(){return Scalear.instruments.filter(function(e){return"bass"===e.group?e:void 0})}()},{name:"Ukulele",group:"ukulele",options:function(){return Scalear.instruments.filter(function(e){return"ukulele"===e.group?e:void 0})}()},{name:"Other",group:"other",options:function(){return Scalear.instruments.filter(function(e){return"other"===e.group?e:void 0})}()}],Scalear.Neck=function(e){return this._parentEl=e,Mvc.View.call(this)},Scalear.Neck.prototype=Object.create(Mvc.View.prototype,{tunning:{get:function(){return Scalear.instruments[this.instrument].tunning}},stringsCount:{get:function(){return this.tunning.length}},neckWidth:{get:function(){return this.stringDistance*this.stringsCount}},fretWidth:{get:function(){return Math.round(this.neckHeight/this.fretCount)}},stringDistance:{value:20},neckHeight:{value:500,writable:!0},fretCount:{value:12,writable:!0},neckType:{value:"gibson",writable:!0},namesVisible:{value:!1,writable:!0},rootNote:{value:0,writable:!0},scale:{value:0,writable:!0},instrument:{value:0,writable:!0}}),Scalear.Neck.prototype.modelUpdate=function(e,t){var n=t?t[0].name:"instrument";switch(n){case"highlighted":this._highlightNotes(e.highlighted);break;case"namesVisible":this.labels[e.namesVisible?"showWithOpacity":"hideWithOpacity"]();var i=q("svg .labels animate#"+(e.namesVisible?"fadein":"fadeout"));i.beginElement&&i.beginElement();break;case"rootNote":case"scale":this.rootNote=e.rootNote,this.scale=Scalear.scales[e.scale].notes.slice(),this._showScale();break;default:this._mainGroup&&this._mainGroup.remove(),this.fretCount=e.fretCount,this.neckType=e.neckType,this.namesVisible=e.namesVisible,this.rootNote=e.rootNote,this.scale=Scalear.scales[e.scale].notes.slice(),this.instrument=e.instrument,this._render(),this._showScale(),this.labels[e.namesVisible?"showWithOpacity":"hideWithOpacity"](),this._highlightNotes(e.highlighted)}},Scalear.Neck.prototype._render=function(){this._mainGroup=new Svg.Group(this._parentEl,{id:"neck",className:this.neckType}),new Svg.Rectangle(this._mainGroup.el,{className:"neck",x:this.fretWidth,y:0,width:this.fretCount*this.fretWidth,height:this.neckWidth,fill:"fender"===this.neckType?"url(#gradientfender)":"url(#gradient)",filter:"url(#neckshadow)"}),this._renderGroups(this._mainGroup.el),this._mapNotes()},Scalear.Neck.prototype._renderGroups=function(e){var t=new Svg.Group(e,{className:"shading"}),n=new Svg.Group(e,{className:"frets"}),i=new Svg.Group(e,{className:"marks"}),r=new Svg.Group(e,{className:"strings"}),s=new Svg.Group(e,{className:"fingers"});this.labels=new Svg.Group(e,{className:"labels",children:[{name:"animate",id:"fadein",attributeType:"CSS",attributeName:"opacity",from:"0",to:"1",dur:"1s",fill:"freeze",begin:"indefinite"},{name:"animate",id:"fadeout",attributeType:"CSS",attributeName:"opacity",from:"1",to:"0",dur:"1s",fill:"freeze",begin:"indefinite"}]}),6!==this.instrument&&12!==this.instrument&&this._renderShading(t.el),this._renderMarks(i.el),6!==this.instrument&&12!==this.instrument&&this._renderFrets(n.el),this._renderStrings(r.el),this._renderFingers(s.el),this._renderLabels(this.labels.el)},Scalear.Neck.prototype._renderShading=function(e){for(var t=0;t<this.fretCount;t++)new Svg.Rectangle(e,{x:t*this.fretWidth+this.fretWidth,y:0,width:this.fretWidth,height:this.neckWidth,fill:"url(#shading)"})},Scalear.Neck.prototype._renderMarks=function(e){[3,5,7,9,12,15,17,19,21,24].map(function(t){t<=this.fretCount&&("fender"===this.neckType?new Svg.Circle(e,{x:(t-1)*this.fretWidth+1.5*this.fretWidth,y:this.neckWidth/2,radius:this.fretWidth/8}):new Svg.Rectangle(e,{x:(t-1)*this.fretWidth+5+this.fretWidth,y:20,height:this.neckWidth-40,width:this.fretWidth-10}))},this)},Scalear.Neck.prototype._renderFrets=function(e){for(var t=0;t<=this.fretCount;t++)new Svg.Line(e,{x1:t*this.fretWidth+this.fretWidth,x2:t*this.fretWidth+this.fretWidth,y1:0,y2:this.neckWidth}),new Svg.Text(e,{x:t*this.fretWidth-this.fretWidth+2*this.fretWidth-2,y:this.neckWidth+10,textContent:t});new Svg.Line(e,{className:"zero",x1:this.fretWidth-2,x2:this.fretWidth-2,y1:0,y2:this.neckWidth+.6})},Scalear.Neck.prototype._mapNotes=function(){var e,t=new Map,n=new Map,i=[];this.tunning.forEach(function(r,s){for(e=0;e<=this.fretCount;e++)i=t.has(r)?t.get(r):[],i.push(this._fingers[s][e]),t.set(r,i),n.set(this._fingers[s][e],this._labels[s][e]),r++,r%=Scalear.notes.length},this),this._notesMap=t,this._labelsMap=n},Scalear.Neck.prototype._renderStrings=function(e){this.tunning.forEach(function(t,n){new Svg.Line(e,{x1:0,x2:this.fretWidth+this.fretCount*this.fretWidth,y1:n*this.stringDistance+this.stringDistance/2,y2:n*this.stringDistance+this.stringDistance/2})},this)},Scalear.Neck.prototype._renderFingers=function(e){var t,n,i=[];for(t=0;t<this.stringsCount;t++)for(i.push([]),n=0;n<=this.fretCount;n++)i[t].push(new Svg.Circle(e,{x:n*this.fretWidth+this.fretWidth/2,y:this.stringDistance*t+this.stringDistance/2,radius:this.stringDistance/3,filter:6===this.instrument||12===this.instrument?"url(#fretless)":"url(#finger)"}));this._fingers=i},Scalear.Neck.prototype._renderLabels=function(e){var t,n,i,r=!1;this._labels=this.tunning.slice().map(function(s,o){return i=new Array(this.fretCount+2).join("0").split(""),i.map(function(i,a){return t=Scalear.notes[(s+a)%Scalear.notes.length],n=t.length>1?1:0,r=t.length>1,new Svg.Text(e,{x:a*this.fretWidth+this.fretWidth/2-2-n,y:this.stringDistance*o+this.stringDistance/2+3,textContent:t.replace("♯",""),children:[{name:"tspan",dy:-2,textContent:r?"♯":""}]})},this)},this)},Scalear.Neck.prototype.showAllNotes=function(e){this._notesMap.get(e).forEach(function(t){t.show(),this._labelsMap.get(t).show(),e===this.rootNote&&(t.className="root")},this)},Scalear.Neck.prototype._showScale=function(e){this._clear(),this.scale=(e||this.scale).slice().map(function(e){return(e+this.rootNote)%Scalear.notes.length},this),this.scale.forEach(function(e){this.showAllNotes(e)},this)},Scalear.Neck.prototype._clear=function(){this._fingers.forEach(function(e){e.map(function(e){e.hide().className="",this._labelsMap.get(e).hide()},this)},this)},Scalear.Neck.prototype._highlightNotes=function(e){this._fingers.forEach(function(e){e.map(function(e){e.removeClass("highlighted")})}),void 0!==e&&this._notesMap.get(e).forEach(function(e){e.addClass("highlighted")})},Scalear.scales=[{id:0,name:"Ionian",notes:[0,2,4,5,7,9,11],group:"scales"},{id:1,name:"Dorian",notes:[0,2,3,5,7,9,10],group:"scales"},{id:2,name:"Myxolidian",notes:[0,2,4,5,7,9,10],group:"scales"},{name:"Aeolian",id:3,notes:[0,2,3,5,7,8,10],group:"scales"},{id:4,name:"Melodic minor",notes:[0,2,3,5,7,9,11],group:"scales"},{id:5,name:"Harmonic minor",notes:[0,2,3,5,7,8,11],group:"scales"},{id:6,name:"Pentatonic major",notes:[0,2,4,7,9],group:"pentatonic"},{id:7,name:"Pentatonic minor",notes:[0,3,5,7,10],group:"pentatonic"},{id:8,name:"Pentatonic blues",notes:[0,3,5,6,7,10],group:"pentatonic"},{id:9,name:"Major chord",notes:[0,4,7],group:"chords"},{id:10,name:"Major 7th chord",notes:[0,4,7,11],group:"chords"},{id:11,name:"Minor chord",notes:[0,3,7],group:"chords"},{id:12,name:"Dim chord",notes:[0,3,6],group:"chords"},{id:13,name:"Dim 7 chord",notes:[0,3,6,9],group:"chords"},{id:14,name:"Whole tone",notes:[0,2,4,6,8,10],group:"scales"},{id:15,name:"Chromatic",notes:[0,1,2,3,4,5,6,7,8,9,10,11],group:"scales"},{id:16,name:"Maj Min Hybrid Pentatonic",notes:[0,2,3,4,5,7,9,10],group:"pentatonic"}],Scalear.scalesGrouped=[{name:"Scales",group:"scales",options:function(){return Scalear.scales.filter(function(e){return"scales"===e.group?e:void 0})}()},{name:"Pentatonic scales",group:"pentatonic",options:function(){return Scalear.scales.filter(function(e){return"pentatonic"===e.group?e:void 0})}()},{name:"Chords",group:"chords",options:function(){return Scalear.scales.filter(function(e){return"chords"===e.group?e:void 0})}()}],Scalear.Select=function(e,t,n){return this._selector=e,this._defaultValue=t,this._propertyName=n,this._el=document.querySelector(this._selector),Mvc.View.call(this)},Scalear.Select.prototype=Object.create(Mvc.View.prototype),Scalear.Select.prototype.modelUpdate=function(e){var t,n=this;e.forEach(function(e,i){document.querySelector(n._selector+' option[value="'+i+'"]')||(t=document.createElement("option"),t.value=i,t.innerHTML=n._propertyName?e[n._propertyName]:e,i===n._defaultValue&&t.setAttribute("selected","selected"),n._el.appendChild(t))})},Scalear.SelectTwoLevel=function(){return Scalear.Select.apply(this,arguments)},Scalear.SelectTwoLevel.prototype=Object.create(Scalear.Select.prototype),Scalear.SelectTwoLevel.prototype.modelUpdate=function(e){var t,n,i,r=this;e.forEach(function(e){n=document.createElement("optgroup"),n.label=e.name,r._el.appendChild(n),e.options.forEach(function(e){i=e.id,document.querySelector(r._selector+' option[value="'+i+'"]')||(t=document.createElement("option"),t.value=i,t.innerHTML=r._propertyName?e[r._propertyName]:e,i===r._defaultValue&&t.setAttribute("selected","selected"),n.appendChild(t))})})},Scalear.Switch=function(e,t){var n=this;return this._selector=e,this._defaultValue=t,this._el=document.querySelector(this._selector),this._el.addEventListener("click",function(){this.value="fender"===document.querySelector(n._selector+' [selected="selected"]').id?"gibson":"fender";var e=new CustomEvent("change");this.dispatchEvent(e)}),this._el.addEventListener("keydown",function(e){if(13===e.keyCode||32===e.keyCode){this.value="fender"===document.querySelector(n._selector+' [selected="selected"]').id?"gibson":"fender";var t=new CustomEvent("change");this.dispatchEvent(t)}}),Mvc.View.call(this)},Scalear.Switch.prototype=Object.create(Mvc.View.prototype),Scalear.Switch.prototype.modelUpdate=function(e,t){if(t=t||[{name:"neckType"}],"neckType"===t[0].name){var n=this;document.querySelector(n._selector+' [selected="selected"]').removeAttribute("selected"),"fender"===e.neckType?document.querySelector(this._selector+" #fender").setAttribute("selected","selected"):document.querySelector(this._selector+" #gibson").setAttribute("selected","selected")}},function(e,t,n,i,r,s,o){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,s=t.createElement(n),o=t.getElementsByTagName(n)[0],s.async=1,s.src=i,o.parentNode.insertBefore(s,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-601743-8","auto"),ga("send","pageview");var q=document.querySelector.bind(document);new Scalear.Application;
//# sourceMappingURL=script.min.js.map